
cmake_minimum_required(VERSION 3.6.0)

set(LIBRARY_NAME android-jni-support)
project(${LIBRARY_NAME})

add_subdirectory(${CMAKE_CURRENT_LIST_DIR}/cmake)
add_subdirectory(${CMAKE_CURRENT_LIST_DIR}/third-party-libs/uuid)

find_library(log-lib log)
find_library(android-lib android)

add_library(
  ${LIBRARY_NAME}
  SHARED
  ${CMAKE_CURRENT_LIST_DIR}/src/main/cpp/sources/main.cpp
)

add_library(androidjnisupport::lib ALIAS android-jni-support)

target_link_libraries(
    ${LIBRARY_NAME}
    android-jni-support-static
    uuid
    ${log-lib}
    ${android-lib}
)

set_target_properties(
    ${LIBRARY_NAME}
    PROPERTIES
    ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_CURRENT_LIST_DIR}/lib/${CMAKE_BUILD_TYPE}/${ANDROID_ABI}"
    LIBRARY_OUTPUT_DIRECTORY "${CMAKE_CURRENT_LIST_DIR}/lib/${CMAKE_BUILD_TYPE}/${ANDROID_ABI}"
)
