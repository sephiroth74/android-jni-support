
cmake_minimum_required(VERSION 3.6.0)

set(LIBRARY_NAME_STATIC android-jni-support-static)

project(${LIBRARY_NAME_STATIC} VERSION 1.0.0 LANGUAGES CXX)

include(${CMAKE_CURRENT_LIST_DIR}/android-jni-support.cmake)

set(LIBRARY_SRC_DIR ${CMAKE_CURRENT_LIST_DIR}/../src/main/cpp/sources)
set(LIBRARY_INC_DIR ${CMAKE_CURRENT_LIST_DIR}/../src/main/cpp/includes/public)

set(
  LIBRARY_SRC_FILES
  ${LIBRARY_SRC_DIR}/jni_boxed.cpp
  ${LIBRARY_SRC_DIR}/jni_context.cpp
  ${LIBRARY_SRC_DIR}/jni_env.cpp
  ${LIBRARY_SRC_DIR}/jni_exceptions.cpp
  ${LIBRARY_SRC_DIR}/jni_file_manager.cpp
  ${LIBRARY_SRC_DIR}/jni_helper.cpp
  ${LIBRARY_SRC_DIR}/jni_io.cpp
  ${LIBRARY_SRC_DIR}/jni_locale.cpp
  ${LIBRARY_SRC_DIR}/jni_logging.cpp
  ${LIBRARY_SRC_DIR}/jni_references.cpp
  ${LIBRARY_SRC_DIR}/jni_shared_preferences.cpp
  ${LIBRARY_SRC_DIR}/jni_thread.cpp
  ${LIBRARY_SRC_DIR}/jni_value_adapter.cpp  
  ${LIBRARY_SRC_DIR}/jni_uuid.cpp  
)

add_library(
  ${LIBRARY_NAME_STATIC}
  STATIC
  ${LIBRARY_SRC_FILES}
)

add_library(
  androidjnisupport::lib 
  ALIAS 
  ${LIBRARY_NAME_STATIC}
)

set_target_properties(
  ${LIBRARY_NAME_STATIC}
  PROPERTIES
  ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_CURRENT_LIST_DIR}/../lib/${CMAKE_BUILD_TYPE}/${ANDROID_ABI}"
  LIBRARY_OUTPUT_DIRECTORY "${CMAKE_CURRENT_LIST_DIR}/../lib/${CMAKE_BUILD_TYPE}/${ANDROID_ABI}"
)

target_include_directories(
  ${LIBRARY_NAME_STATIC}
  PUBLIC
  ${LIBRARY_INC_DIR}
  ${CMAKE_CURRENT_LIST_DIR}/../third-party-libs
)

target_compile_options(
  ${LIBRARY_NAME_STATIC}
  PUBLIC
  ${SHAREDLIBS_CFLAGS}
)

set_target_properties(
  ${LIBRARY_NAME_STATIC} 
  PROPERTIES
  INTERFACE_INCLUDE_DIRECTORIES 
  ${LIBRARY_INC_DIR}
)